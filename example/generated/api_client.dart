// GENERATED CODE - DO NOT MODIFY BY HAND.
//
// This file was generated by dart_swagger_to_api_client.

import 'dart:async';
import 'dart:convert';

import 'package:dart_swagger_to_api_client/dart_swagger_to_api_client.dart';

/// Main entry point for working with the API.
class ApiClient {
  ApiClient(this._config);

  final ApiClientConfig _config;

  /// Default resource group.
  ///
  /// Future versions will split endpoints into multiple resource classes
  /// (e.g. UsersApi, OrdersApi) based on tags from the OpenAPI spec.
  DefaultApi get defaultApi => DefaultApi(_config);
}

/// Very small example of a resource class.
///
/// In v0.1 it only exposes a single generic `getRaw` method for demonstration.
class DefaultApi {
  DefaultApi(this._config);

  final ApiClientConfig _config;

  /// Generated from GET /products
  Future<void> getProducts({}) async {
    const _rawPath = '/products';
    final _path = '/products';

    final auth = _config.auth;
    final queryParameters = <String, String>{};
    if (auth?.apiKeyQuery != null && auth?.apiKey != null) {
      queryParameters[auth!.apiKeyQuery!] = auth.apiKey!;
    }
    final uri = _config.baseUrl.replace(path: _path, queryParameters: queryParameters.isEmpty ? null : queryParameters,);

    final headers = <String, String>{
      ..._config.defaultHeaders,
    };
    final auth = _config.auth;
    if (auth != null) {
      if (auth.bearerToken != null) {
        headers['Authorization'] = 'Bearer ${auth.bearerToken}';
      }
      if (auth.apiKeyHeader != null && auth.apiKey != null) {
        headers[auth.apiKeyHeader!] = auth.apiKey!;
      }
    }

    final request = HttpRequest(
      method: 'GET',
      url: uri,
      headers: headers,
    );

    final response = await _config.httpClientAdapter
        .send(request).timeout(_config.timeout);

    if (response.statusCode == 401 || response.statusCode == 403) {
      throw ApiAuthException('Unauthorized request to $ _rawPath',
          statusCode: response.statusCode);
    }
    if (response.statusCode >= 500) {
      throw ApiServerException('Server error on $ _rawPath',
          statusCode: response.statusCode);
    }
    if (response.statusCode < 200 || response.statusCode >= 300) {
      throw ApiClientException('Request failed for $ _rawPath',
          statusCode: response.statusCode);
    }

    return;
  }

}
